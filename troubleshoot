Networking s Security Scenarios 
======================
1. A website running on your Linux server is inaccessible, but the server is up. How do you troubleshoot?

We first check if the web server (Apache/Nginx) is running using systemctl status.
Then we verify the firewall rules and use netstat -tuln or ss -tuln to confirm the port is open.
Finally, we check the server logs (/var/log/) and try curl localhost for local accessibility.

2. You need to allow only a specific IP to access a server over SSH. How would you configure it?

We edit the SSH configuration file /etc/ssh/sshd_config and use AllowUsers or Match blocks.
Alternatively, we use firewall rules: iptables -A INPUT -p tcp -s <IP> --dport 22 -j ACCEPT.
Donâ€™t forget to restart sshd after changes.

3. Your server is under a DDoS attack. How do you mitigate it using Linux commands?

We can use netstat or ss to identify unusual connections.
Then, we use iptables or firewalld to block IPs or rate-limit traffic.
Installing tools like fail2ban or ufw can help with automated blocking.

4. You need to check which ports are open and which services are listening. How do you do that?

We use ss -tuln or netstat -tuln to view listening ports.
To map services with PIDs, we use ss -tulnp or lsof -i.
This helps identify unauthorized or unexpected services.

5. A user is unable to reach an external website from a Linux server. How do you troubleshoot network connectivity?

We first check basic connectivity with ping or curl.
Then we verify DNS resolution using dig or nslookup.
If needed, we check routes with ip route and firewall settings with iptables or ufw.

6. You need to set up a firewall to allow only HTTP, HTTPS, and SSH traffic. How do you do it?

Using ufw, we run:
ufw allow 22 
ufw allow 80 
ufw allow 443 
ufw enable 
For iptables, we allow specific ports and drop the rest.

7. How do you check which process is using a specific port?

We use lsof -i :<port> or ss -tulnp | grep <port> to find the PID and program.
It tells us which service is bound to the port.
This is useful for troubleshooting conflicts or security risks.

8. A connection to a database is failing from your Linux server. How do you troubleshoot it?

We first check connectivity with telnet <host> <port> or nc.
Then we confirm the database service is up and accepting connections.
Firewall, SELinux, or bind-address misconfigurations can also block access.

9. You need to change the default SSH port for security reasons. How do you do it?

We edit /etc/ssh/sshd_config and change the Port directive to a new number.
Then, we allow the new port in the firewall and restart the SSH service.
Itâ€™s good practice to inform users and test before closing the old port.

10. How do you enable IP forwarding on a Linux system?

We temporarily enable it with:
echo 1 > /proc/sys/net/ipv4/ip_forward 
For a permanent setup, we edit /etc/sysctl.conf and set net.ipv4.ip_forward = 1, then run sysctl -p.

---------------------------------------------------------------------------------------------------------

when Internet access is not working , check /etc/resolve.conf > nameserver , 
Also check ifconfig > for eth0 end point . 
check /etc/network/interface > file and make sure eth0 are same 

> If repo is not able to update or package not found 
check /etc/apt/source.list > and need to add package according to the OS LIKE for Ubuntu add ".deb" package repo 

--------------------------------------------------------------------------------------------------------------------------------------------

******Linux Troubleshooting Cheatsheet****** 

1. How to Check Disk Space Usage
Answer: 
Use df -h to view disk usage by mounted filesystems. For directory-level details, run du -sh /path/to/directory. Clean up old logs, unused packages, or large files with tools like ncdu for interactive analysis.

2. Service Fails to Start
Answer: 
Check status with systemctl status service-name. View logs via journalctl -u service-name --since "10 minutes ago". Ensure dependencies are installed and configuration files (e.g., /etc/service-name/config.conf) are correct.

3. Network Connectivity Issues
Answer:
- Test connectivity: ping 8.8.8.8 (Google DNS). 
- Check routes: ip route or traceroute google.com. 
- Verify DNS: dig google.com or nslookup google.com. 
- Inspect interfaces: ip a or ifconfig. Restart networking with systemctl restart NetworkManager (or networkd).

4. "Permission Denied" Errors
Answer: 
- Check permissions: ls -l /path/to/file. 
- Modify permissions: chmod 755 file or chown user:group file. 
- If SELinux/AppArmor blocks access, check logs (/var/log/audit/audit.log) or temporarily disable with setenforce 0.

5. Terminating Unresponsive Processes
Answer: 
- Find PID: ps aux | grep process-name or top. 
- Kill process: kill -9 PID or pkill process-name. 
- Force-kill all instances: killall -9 process-name.

6. System Fails to Boot
Answer:
- Boot into recovery mode (GRUB menu) and check logs (/var/log/boot.log or journalctl -b). 
- Repair filesystems: fsck /dev/sdX. 
- Reinstall bootloader (GRUB): grub-install /dev/sdX.

7. "No Space Left on Device" Despite Free Space
Answer: 
- Check inode usage: df -i. 
- Delete small, numerous files (e.g., temporary files) to free inodes.

8. DNS Resolution Failures
Answer: 
- Verify DNS config: cat /etc/resolv.conf. 
- Test DNS server: dig @8.8.8.8 google.com. 
- Restart DNS resolver: systemctl restart systemd-resolved.

9. High CPU/Memory Usage
Answer: 
- Identify resource hogs: top, htop, or vmstat 2. 
- Kill problematic processes or optimize applications. Check for memory leaks with free -h.

10. SSH Connection Refused
Answer:
- Ensure SSH service runs: systemctl status sshd. 
- Check firewall rules: ufw status or iptables -L. 
- Verify SSH port (default: 22) is open and accessible.

 11.Filesystem Corruption
Answer:
- Unmount the disk: umount /dev/sdX. 
- Run fsck /dev/sdX to repair. Backup critical data first. For root FS, boot from a live USB.

12. Cron Jobs Not Executing
Answer: 
- Check cron logs: grep CRON /var/log/syslog. 
- Ensure the cron service is running: systemctl status cron. 
- Validate syntax and user permissions in /etc/crontab or user crontabs (crontab -e).

-----------------------------------------------------Hyenoon Server --------------------------------------------------------------------------------

#SVN BACKUPS
0 2 * * * rsync -avz -e "ssh -p 9011" usman@168.235.66.135:/var/svn /home/hyenoon/backup/svn/ >> /home/hyenoon/backup/svn/rsync.log 2>&0



#GITEA BACKUPS SCRIPT
0 2 * * * /home/git/gitea_backups/backup_gitea_weekly.sh >> /home/git/gitea_backups/gitea-weekly-backup.log 2>&1

----------------------------------------------------------------------------------------------------------------------------------------------

Quick Linux Trick:
Server load so high you canâ€™t even SSH in?

ğŸ‘‰ Use this command;

ssh -o ConnectTimeout=1 -o ConnectionAttempts=1 user@host "nice -n -20 bash"

-----------------------------------------------laravel Project---------------------------------------------------------------------------

To prevent this issue in the future (recommended for all Laravel deployments)

cd /var/www/kdms_aftersales_backend

# Ensure directories and permissions are correct
mkdir -p storage/framework/{cache/data,sessions,views} bootstrap/cache
chown -R www-data:www-data storage bootstrap/cache
chmod -R 775 storage bootstrap/cache

# Clear and rebuild caches
php artisan optimize:clear
php artisan optimize

php artisan config:clear
php artisan route:clear
php artisan view:clear

-------------------------------------------DevOps daily TS----------------------------------------------------------------------------

ğ˜¿ğ™–ğ™ğ™¡ğ™® ğ™‡ğ™ğ™›ğ™š-ğ™ğ™–ğ™«ğ™šğ™§ğ™¨:
 â€¢ ps aux | grep {process} â†’ Find that sneaky process
 â€¢ lsof -i :{port} â†’ Whoâ€™s stealing your port
 â€¢ df -h â†’ Classic â€œweâ€™re out of spaceâ€ alert
 â€¢ netstat -tulpn â†’ Network connection detective
 â€¢ kubectl get pods | grep -i error â†’ Quick K8s issue finder

ğ™‡ğ™¤ğ™œ ğ™ƒğ™ªğ™£ğ™©ğ™šğ™§ğ™¨:
 â€¢ tail -f /var/log/* â†’ Real-time log watcher
 â€¢ journalctl -fu service-name â†’ SystemD follower
 â€¢ grep -r "error" . â†’ The error hunter
 â€¢ zcat access.log.gz | grep "500" â†’ Find hidden 500s in compressed logs
 â€¢ less +F â†’ The improved tail

ğ˜¾ğ™¤ğ™£ğ™©ğ™–ğ™ğ™£ğ™šğ™§ ğ™’ğ™ğ™ğ™¨ğ™¥ğ™šğ™§ğ™šğ™§ğ™¨:
 â€¢ docker ps --format '{{.Names}} {{.Status}}' â†’ Clean container overview
 â€¢ docker stats --no-stream â†’ Resource snapshot
 â€¢ crictl logs {container} â†’ Raw container stories
 â€¢ docker exec -it â†’ Jump inside like a ninja
 â€¢ podman top â†’ Process peek inside containers

ğ™ğ™®ğ™¨ğ™©ğ™šğ™¢ ğ˜¿ğ™šğ™©ğ™šğ™˜ğ™©ğ™ğ™«ğ™šğ™¨:
 â€¢ htop â†’ The visual performance monitor
 â€¢ iostat -xz 1 â†’ Disk I/O inspector
 â€¢ free -h â†’ Memory usage at a glance
 â€¢ vmstat 1 â†’ CPU & memory vitals
 â€¢ dmesg -T | tail â†’ Kernelâ€™s fresh gossip
 â€¢ uptime â†’ Quick load average check

ğ™‰ğ™šğ™©ğ™¬ğ™¤ğ™§ğ™  ğ™‰ğ™ğ™£ğ™Ÿğ™–ğ™¨:
 â€¢ curl -v â†’ HTTP talk decoder
 â€¢ dig +short â†’ DNS lookup made easy
 â€¢ ss -tunlp â†’ Modern replacement for netstat
 â€¢ iptables -L â†’ Firewall insights
 â€¢ traceroute â†’ Whereâ€™s my packet going?
 â€¢ nmap -sS {IP} â†’ (Bonus) Silent port scanner for quick checks

ğ™ğ™ğ™¡ğ™š ğ™…ğ™ªğ™œğ™œğ™¡ğ™šğ™§ğ™¨:
 â€¢ find . -name "*.yaml" -type f â†’ YAML hunter
 â€¢ rsync -avz â†’ The smart copier
 â€¢ tar -xvf â†’ The â€œI always Google thisâ€ one ğŸ˜…
 â€¢ ln -s â†’ Symlink creator
 â€¢ chmod +x â†’ Make it executable
 â€¢ du -sh * | sort -h â†’ Find whatâ€™s eating your disk space

ğ™‹ğ™šğ™§ğ™›ğ™¤ğ™§ğ™¢ğ™–ğ™£ğ™˜ğ™š ğ™‹ğ™§ğ™¤ğ™›ğ™ğ™¡ğ™šğ™§ğ™¨:
 â€¢ strace -p {pid} â†’ System call spy
 â€¢ tcpdump -i any â†’ Packet sniffer
 â€¢ sar -n DEV 1 â†’ Network stats monitor
 â€¢ pidstat -u 1 â†’ Per-process CPU usage
 â€¢ top -c â†’ The classic

ğ™‚ğ™ğ™© ğ™€ğ™¨ğ™¨ğ™šğ™£ğ™©ğ™ğ™–ğ™¡ğ™¨:
 â€¢ git log --oneline â†’ Short history
 â€¢ git stash â†’ Temporary hideout
 â€¢ git reset --hard HEAD^ â†’ Undo disaster
 â€¢ git diff --cached â†’ Whatâ€™s staged?
 â€¢ git blame â†’ The â€œwho did this?â€ finder

------------------------------------------------------------------------------------------------------------------------------------------

 Linux Load Average Spikes â€” But CPU Looks Normal? Hereâ€™s Whatâ€™s Really Happening.

Ever seen your Linux servers showing high load average even though CPU usage stays low?
This is a classic scenario many SysAdmins and IT Managers run into â€” and the root cause is often not CPU at all.

---

ğŸ§  Whatâ€™s Going On?

When the load average climbs but CPU stays healthy, the system is usually stuck waiting on something else:

âœ… I/O Wait â€” The biggest cause.
Slow or overloaded storage means processes are waiting for disk I/O to complete.

---

ğŸ” How to Diagnose It

ğŸ“Œ 1. Check disk wait queues
Use tools like:

iostat -x

vmstat 1

dstat -d

Look for:

High await

High svctm

High %iowait

ğŸ“Œ 2. Review NFS or remote storage

Stale NFS handles

Slow NAS/SAN response

Network mount timeouts

ğŸ“Œ 3. Inspect kernel and hardware logs
Run:
dmesg | grep -i error
Look for:

Disk timeouts

Failed sectors

Filesystem warnings

---

ğŸ› ï¸ Why This Happens

Load average counts more than just CPU usage.
It also includes:

Processes waiting for I/O

Tasks stuck in uninterruptible sleep (D state)

So even with low CPU, a slow disk = high load average.

---

ğŸ¯ Key Takeaway

If your Linux load is spiking without CPU usage increasing, start with storage, not compute.
Most real bottlenecks will be found in the disk layer or NFS pathsâ€”not the CPU.

------------------------------------Linux TS------------------------------------------

 Linux Interview Essentials
-------------------------------
1ï¸âƒ£ Linux Boot Workflow
 âœ” BIOS/UEFI â†’ Initializes hardware and verifies boot device.
 âœ” Bootloader (GRUB) â†’ Loads the Linux kernel.
 âœ” Kernel Initialization â†’ Loads drivers and mounts root filesystem.
 âœ” init/systemd takes over and manages services.
 âœ” System reaches defined runlevel/systemd target and becomes ready for use.
2ï¸âƒ£ Troubleshooting a Slow Linux System
Always check in this order:
 âœ” CPU usage: top, htop
 âœ” Memory pressure: free -h, vmstat
 âœ” I/O bottleneck: iostat, sar
 âœ” Disk space: df -h, du -sh *
 âœ” Network load: iftop, ss, netstat

3ï¸âƒ£ Identifying Heavy Resource Processes
 âœ” CPU: ps aux --sort=-%cpu
 âœ” Memory: ps aux --sort=-%mem
 âœ” Interactive view: top, htop

4ï¸âƒ£ Diagnosing High I/O Wait:
 âœ” Tools: iostat -x, pidstat -d, iotop, lsof
Check for: slow disks, overloaded applications, or excessive read/write operations.

5ï¸âƒ£ Load Average vs CPU Usage:
 âœ”  Load Average â†’ How many processes are running or waiting.
 âœ”  CPU Utilization â†’ How busy the CPU actually is.

6ï¸âƒ£ Checking Active Ports & Services
 âœ”  ss -tulpn
 âœ”  netstat -tulpn
 âœ”  lsof -i :<port>

7ï¸âƒ£ Debugging Crashes / Kernel Issues
 Logs to check:
 âœ” /var/log/messages, 
 âœ” /var/log/kern.log, 
 âœ” journalctl -xe, 
 âœ” /var/crash

8ï¸âƒ£ systemd Targets / Runlevels
 âœ” multi-user.target â†’ CLI mode
 âœ” graphical.target â†’ GUI mode
 âœ” rescue.target â†’ Maintenance mode

9ï¸âƒ£ Managing System Services
 âœ” systemctl start <service>
 âœ” systemctl stop <service>
 âœ” systemctl status <service>
 âœ” systemctl enable <service>
 âœ” systemctl disable <service>

ğŸ”Ÿ Disk Monitoring & Inode Check
 âœ” Disk space: df -h, du -sh *
 âœ” Inodes: df -i

1ï¸âƒ£1ï¸âƒ£ Boot Failure â€“ Common Causes

 âœ” âš  GRUB corruption
 âœ” âš  Filesystem damage
 âœ” âš  Missing UUID
 âœ” âš  Kernel panic

1ï¸âƒ£2ï¸âƒ£ Increasing LVM Storage
 âœ” Commands in sequence:
 âœ” pvcreate â†’ vgextend â†’ lvextend â†’ resize2fs/xfs_growfs

1ï¸âƒ£3ï¸âƒ£ Cron Job Setup & Validation
 âœ” Create/Edit: crontab -e
 âœ” Verify logs: /var/log/cron or journalctl -u crond

1ï¸âƒ£4ï¸âƒ£ Find Deleted File Still in Use
 âœ” lsof | grep deleted

1ï¸âƒ£5ï¸âƒ£ Monitoring Swap
 âœ” free -h
 âœ” swapon -s
 âœ” vmstat
 âœ” top







